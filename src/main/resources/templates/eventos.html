<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{layout :: layout('Eventos', ~{::section})}">
<section>
    <div style="text-align: center; margin-bottom: 40px;">
        <h2 style="color: #003366; font-size: 2.5em; margin-bottom: 10px;">Eventos Universitarios</h2>
        <p style="color: #666;">Descubre todas nuestras actividades acad√©micas y culturales</p>
        <div style="width: 60px; height: 4px; background: #ffd700; margin: 15px auto;"></div>
    </div>

    <!-- Bot√≥n para agregar evento -->
    <div style="text-align: center; margin-bottom: 30px;">
        <a th:href="@{/eventos/nuevo}" style="background: #003366; color: white; padding: 15px 30px; text-decoration: none; border-radius: 5px; display: inline-block; font-weight: bold;">
            ‚ûï Crear Nuevo Evento
        </a>
    </div>

    <!-- Filtros din√°micos -->
    <div style="display: flex; justify-content: center; gap: 15px; margin-bottom: 30px; flex-wrap: wrap;">
        <a th:href="@{/eventos}"
           th:style="${categoriaActual == null} ? 'background: #003366; color: white;' : 'background: transparent; color: #003366;'"
           style="padding: 8px 20px; border: 2px solid #003366; border-radius: 25px; text-decoration: none; font-weight: bold;">
            Todos
        </a>
        <a th:href="@{/eventos(categoria='academico')}"
           th:style="${categoriaActual == 'academico'} ? 'background: #003366; color: white;' : 'background: transparent; color: #003366;'"
           style="padding: 8px 20px; border: 2px solid #003366; border-radius: 25px; text-decoration: none;">
            Acad√©micos
        </a>
        <a th:href="@{/eventos(categoria='cultural')}"
           th:style="${categoriaActual == 'cultural'} ? 'background: #003366; color: white;' : 'background: transparent; color: #003366;'"
           style="padding: 8px 20px; border: 2px solid #003366; border-radius: 25px; text-decoration: none;">
            Culturales
        </a>
        <a th:href="@{/eventos(categoria='tecnologia')}"
           th:style="${categoriaActual == 'tecnologia'} ? 'background: #003366; color: white;' : 'background: transparent; color: #003366;'"
           style="padding: 8px 20px; border: 2px solid #003366; border-radius: 25px; text-decoration: none;">
            Tecnolog√≠a
        </a>
    </div>

    <!-- Grid de Eventos DIN√ÅMICOS DE LA BD (ARRIBA - M√°s recientes primero) -->
    <div class="eventos-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 30px; margin-bottom: 50px; max-width: 1200px; margin-left: auto; margin-right: auto;">

        <div th:each="evento : ${eventos}" style="background: white; border-radius: 15px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.1); transition: transform 0.3s;"
             onmouseover="this.style.transform='translateY(-5px)'" onmouseout="this.style.transform='translateY(0)'">

            <div style="position: relative;">
                <img th:if="${evento.imagenUrl}" th:src="@{'/uploads/' + ${evento.imagenUrl}}"
                     style="width: 100%; height: 200px; object-fit: cover;" alt="Evento">
                <div th:unless="${evento.imagenUrl}"
                     style="width: 100%; height: 200px; background: linear-gradient(135deg, #003366, #004488); display: flex; align-items: center; justify-content: center; color: white; font-size: 3em;">
                    üìÖ
                </div>

                <span th:text="${evento.categoria}"
                      style="position: absolute; top: 15px; right: 15px; background: #ffd700; color: #003366; padding: 5px 15px; border-radius: 20px; font-weight: bold; font-size: 0.9em; text-transform: uppercase;">
                </span>
            </div>

            <div style="padding: 20px;">
                <div style="color: #666; font-size: 0.9em; margin-bottom: 10px;">
                    üìÖ <span th:text="${#temporals.format(evento.fecha, 'dd MMMM yyyy')}">Fecha</span>
                    <span th:if="${evento.lugar}" style="margin-left: 15px;">üìç <span th:text="${evento.lugar}">Lugar</span></span>
                </div>

                <h3 style="color: #003366; margin-bottom: 15px; font-size: 1.3em;" th:text="${evento.titulo}">T√≠tulo</h3>
                <p style="color: #555; line-height: 1.6; margin-bottom: 15px;" th:text="${#strings.abbreviate(evento.descripcion, 80)}">Descripci√≥n...</p>

                <!-- BOTONES CRUD -->
                <div style="display: flex; gap: 8px;">
                    <button onclick="mostrarDetalles(this)"
                            th:data-titulo="${evento.titulo}"
                            th:data-desc="${evento.descripcion}"
                            th:data-fecha="${#temporals.format(evento.fecha, 'dd MMMM yyyy')}"
                            th:data-lugar="${evento.lugar}"
                            style="flex: 1; padding: 8px; background: #003366; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; font-size: 0.9em;">
                        Ver
                    </button>
                    <a th:href="@{/eventos/editar/{id}(id=${evento.id})}"
                       style="flex: 1; padding: 8px; background: #ffd700; color: #003366; text-decoration: none; border-radius: 5px; text-align: center; font-weight: bold; font-size: 0.9em;">
                        ‚úèÔ∏è Editar
                    </a>
                    <a th:href="@{/eventos/eliminar/{id}(id=${evento.id})}"
                       onclick="return confirm('¬øEst√° seguro de eliminar este evento?');"
                       style="flex: 1; padding: 8px; background: #dc3545; color: white; text-decoration: none; border-radius: 5px; text-align: center; font-weight: bold; font-size: 0.9em;">
                        üóëÔ∏è Eliminar
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Mensaje si no hay eventos din√°micos -->
    <div th:if="${#lists.isEmpty(eventos)}" style="text-align: center; padding: 40px; color: #666; background: #f8f9fa; border-radius: 10px; margin-bottom: 30px;">
        <p style="font-size: 1.2em;">No hay eventos din√°micos creados todav√≠a.</p>
        <a th:href="@{/eventos/nuevo}" style="background: #003366; color: white; padding: 12px 30px; text-decoration: none; border-radius: 5px; display: inline-block; margin-top: 10px;">
            Crear el primer evento
        </a>
    </div>

    <hr style="border: none; border-top: 3px solid #ffd700; margin: 40px auto; max-width: 200px;">

    <!-- EVENTOS EST√ÅTICOS ORIGINALES (ABAJO) -->
    <div style="text-align: center; margin-bottom: 30px;">
        <h3 style="color: #003366; font-size: 1.5em;">Eventos Destacados Anteriores</h3>
    </div>

    <div class="eventos-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 30px; margin-bottom: 50px; max-width: 1000px; margin-left: auto; margin-right: auto; opacity: 0.9;">

        <!-- Evento 1: IA -->
        <div class="evento-card" data-categoria="tecnologia" style="background: white; border-radius: 15px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
            <div style="position: relative;">
                <img src="/images/evento-ia.jpg" alt="IA" style="width: 100%; height: 200px; object-fit: cover;">
                <span style="position: absolute; top: 15px; right: 15px; background: #ffd700; color: #003366; padding: 5px 15px; border-radius: 20px; font-weight: bold;">Tecnolog√≠a</span>
            </div>
            <div style="padding: 20px;">
                <div style="color: #666; font-size: 0.9em; margin-bottom: 10px;">üìÖ 10 de marzo de 2025</div>
                <h3 style="color: #003366; margin-bottom: 15px;">Conferencia sobre IA en Educaci√≥n</h3>
                <p style="color: #555; line-height: 1.6; margin-bottom: 15px;">Explora el impacto de la Inteligencia Artificial en la educaci√≥n moderna.</p>
            </div>
        </div>

        <!-- Evento 2: Feria -->
        <div class="evento-card" data-categoria="academico" style="background: white; border-radius: 15px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
            <div style="position: relative;">
                <img src="/images/evento-feria.jpg" alt="Feria" style="width: 100%; height: 200px; object-fit: cover;">
                <span style="position: absolute; top: 15px; right: 15px; background: #ffd700; color: #003366; padding: 5px 15px; border-radius: 20px; font-weight: bold;">Acad√©mico</span>
            </div>
            <div style="padding: 20px;">
                <div style="color: #666; font-size: 0.9em; margin-bottom: 10px;">üìÖ 25 de abril de 2025</div>
                <h3 style="color: #003366; margin-bottom: 15px;">Feria de Empleabilidad</h3>
                <p style="color: #555; line-height: 1.6; margin-bottom: 15px;">Conecta con las mejores empresas y descubre oportunidades laborales.</p>
            </div>
        </div>

        <!-- Evento 3: Cultural -->
        <div class="evento-card" data-categoria="cultural" style="background: white; border-radius: 15px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
            <div style="position: relative;">
                <img src="/images/evento-cultural.jpg" alt="Cultural" style="width: 100%; height: 200px; object-fit: cover;">
                <span style="position: absolute; top: 15px; right: 15px; background: #ffd700; color: #003366; padding: 5px 15px; border-radius: 20px; font-weight: bold;">Culturales</span>
            </div>
            <div style="padding: 20px;">
                <div style="color: #666; font-size: 0.9em; margin-bottom: 10px;">üìÖ 10 de junio de 2025</div>
                <h3 style="color: #003366; margin-bottom: 15px;">Eventos Culturales Nuestra Sede</h3>
                <p style="color: #555; line-height: 1.6; margin-bottom: 15px;">Presentaciones culturales de la sede Bajo Cauca.</p>
            </div>
        </div>

        <!-- Evento 4: Simposio -->
        <div class="evento-card" data-categoria="tecnologia" style="background: white; border-radius: 15px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
            <div style="position: relative;">
                <img src="/images/evento-simposio.jpg" alt="Simposio" style="width: 100%; height: 200px; object-fit: cover;">
                <span style="position: absolute; top: 15px; right: 15px; background: #ffd700; color: #003366; padding: 5px 15px; border-radius: 20px; font-weight: bold;">Tecnolog√≠a</span>
            </div>
            <div style="padding: 20px;">
                <div style="color: #666; font-size: 0.9em; margin-bottom: 10px;">üìÖ 15 de mayo de 2025</div>
                <h3 style="color: #003366; margin-bottom: 15px;">Simposio de Innovaci√≥n Tecnol√≥gica</h3>
                <p style="color: #555; line-height: 1.6; margin-bottom: 15px;">Tendencias en tecnolog√≠a e innovaci√≥n.</p>
            </div>
        </div>
    </div>

    <!-- Modal para detalles -->
    <div id="detalleModal" style="display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.7);">
        <div style="background: white; margin: 10% auto; padding: 30px; width: 90%; max-width: 500px; border-radius: 15px; position: relative;">
            <span onclick="cerrarModal()" style="position: absolute; right: 20px; top: 10px; font-size: 30px; cursor: pointer; color: #003366;">&times;</span>
            <h2 id="modalTitulo" style="color: #003366; margin-bottom: 15px;"></h2>
            <div style="background: #f0f8ff; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                <p style="margin: 5px 0;"><strong>üìÖ Fecha:</strong> <span id="modalFecha"></span></p>
                <p style="margin: 5px 0;" id="modalLugarContainer"><strong>üìç Lugar:</strong> <span id="modalLugar"></span></p>
            </div>
            <p id="modalDesc" style="color: #555; line-height: 1.6;"></p>
        </div>
    </div>

    <script>
        function mostrarDetalles(btn) {
            document.getElementById('modalTitulo').innerText = btn.getAttribute('data-titulo');
            document.getElementById('modalDesc').innerText = btn.getAttribute('data-desc');
            document.getElementById('modalFecha').innerText = btn.getAttribute('data-fecha');

            var lugar = btn.getAttribute('data-lugar');
            var lugarContainer = document.getElementById('modalLugarContainer');
            if (lugar && lugar !== 'null' && lugar !== '') {
                document.getElementById('modalLugar').innerText = lugar;
                lugarContainer.style.display = 'block';
            } else {
                lugarContainer.style.display = 'none';
            }

            document.getElementById('detalleModal').style.display = 'block';
        }

        function cerrarModal() {
            document.getElementById('detalleModal').style.display = 'none';
        }

        window.onclick = function(event) {
            var modal = document.getElementById('detalleModal');
            if (event.target == modal) {
                modal.style.display = 'none';
            }
        }
    </script>
</section>
</html>